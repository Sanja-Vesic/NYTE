<!doctype html>
<html lang="en">
  <head>
     <meta charset="UTF-8" />
    <title>NYT Explorer</title>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
  </head>
  <body>
    <h1>NYT Explorer</h1>
     <button onclick="find()">Find</button>
   <div id="root">
    </div>



    <script type="text/babel">
      class App extends React.Component { 

            constructor(props){
                super(props)
                this.state = {data: []};
                this.setData = this.setData.bind(this);
            }

            setData(responseData){
               
                const doc = responseData.response.docs.slice(0,5);
               
            
             this.setState({data: doc});
        }
            
      componentDidMount(){
       $.ajax({
            
            url: 'https://api.nytimes.com/svc/archive/v1/2016/1.json?api-key=02a32004d52545be9c4e7b6f0b3edc28',
          
            success: this.setData
        })

    }
  
        render(){
         
         if(this.state.data.length ==0){
                   
                  
                    return  <img className="bb" src="./demo1.gif" ></img>;
                }
      
        return (
          <div>


          {
            this.state.data.map( (article) => <Article key={article.web_url} url={article.web_url} /> )
          }

          </div>
        );
      }

   }
   class Article extends React.Component {

    constructor(props){
      super(props)
      this.state = {data: {}};
      this.setData = this.setData.bind(this)

    }

    setData(responseData){
    this.setState({data: responseData}); 
    }   

 componentDidMount(){
       $.ajax({
            
            url: 'http://api.linkpreview.net/?key=123456&q=https://www.google.com',
          
            success: this.setData
        })

    }
    
    render(){
  
        

      return (
        <div className="flex-container">
          <p>{this.state.data.description}</p>
          <img className="aa" src={this.state.data.image} ></img>
          <p>MORE AT:
            <a href={this.state.data.url}>{this.state.data.url}</a>
          </p>
        </div>
      );
    }
}  
   
            

  function find(){
ReactDOM.render(<App/>, document.getElementById('root'));
       }     
    </script>
  </body>
</html>
